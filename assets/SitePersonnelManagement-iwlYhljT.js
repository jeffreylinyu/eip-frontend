import{u as f}from"./company-u7iU6W-r.js";import{d as p,j as y,r as v,k as x,a as b,c as k,e as s,f as r,l as t,i as l,s as _}from"./index-DpB6-9r-.js";import{S as g}from"./SitePersonnelManagement-CxD-powI.js";const h={class:"container-fluid"},w={class:"row"},C={class:"col-12"},S={key:0},M={key:1,class:"text-center py-5"},j=p({__name:"SitePersonnelManagement",setup(N){const i=f(),m=y(),n=v(!1),o=x(()=>{const e=m.currentWorkspace;return e!=null&&e.companyId?{id:e.companyId,name:e.companyName||e.name||"當前公司"}:null}),d=async()=>{n.value=!0;try{await i.initCompanies()}catch(e){console.error("Failed to refresh data:",e)}finally{n.value=!1}},c=()=>{window.history.back()};return b(async()=>{await i.initCompanies(),o.value||console.warn("用戶沒有當前工作空間或公司信息，無法訪問工地人員管理")}),(e,a)=>{const u=k("PageHeader");return r(),s("div",h,[t("div",w,[t("div",C,[l(u,{title:"工地人員管理",icon:"fa fa-hard-hat",breadcrumbs:[{text:"公司管理",href:"javascript:;"},{text:"工地人員管理",active:!0}],actions:[{text:"返回",icon:"fa fa-arrow-left",variant:"btn-outline-secondary",click:c},{text:"重新載入",icon:"fa fa-refresh",variant:"btn-outline-theme",click:d,disabled:n.value,loading:n.value}]},null,8,["actions"]),o.value?(r(),s("div",S,[l(g,{"company-id":o.value.id,"company-name":o.value.name},null,8,["company-id","company-name"])])):(r(),s("div",M,[a[1]||(a[1]=t("i",{class:"fa fa-exclamation-triangle fa-3x text-warning mb-3"},null,-1)),a[2]||(a[2]=t("h5",{class:"text-muted"},"無法載入公司資訊",-1)),a[3]||(a[3]=t("p",{class:"text-muted mb-3"},"請先選擇工作空間或返回公司管理頁面",-1)),t("button",{class:"btn btn-theme",onClick:c},a[0]||(a[0]=[t("i",{class:"fa fa-arrow-left me-2"},null,-1),_(" 返回公司管理 ")]))]))])])])}}});export{j as default};
