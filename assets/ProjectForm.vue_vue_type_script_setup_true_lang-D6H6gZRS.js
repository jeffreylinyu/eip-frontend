import{r as O,I as M,x as T,d as z,f as v,g,h as t,i as b,k as p,j as c,v as x,z as k,m as a,t as y,E as U,c as L,l as I,F as Z,D as G,A as H}from"./index-0fEq5Ai7.js";class ${static required(n){return n==null?{isValid:!1,message:"此欄位為必填"}:typeof n=="string"&&n.trim()===""?{isValid:!1,message:"此欄位為必填"}:Array.isArray(n)&&n.length===0?{isValid:!1,message:"此欄位為必填"}:{isValid:!0}}static minLength(n,i){return n?n.length<i?{isValid:!1,message:`最少需要 ${i} 個字符`}:{isValid:!0}:{isValid:!0}}static maxLength(n,i){return n?n.length>i?{isValid:!1,message:`不能超過 ${i} 個字符`}:{isValid:!0}:{isValid:!0}}static min(n,i){if(n==null||n==="")return{isValid:!0};const f=Number(n);return isNaN(f)||f<i?{isValid:!1,message:`值不能小於 ${i}`}:{isValid:!0}}static max(n,i){if(n==null||n==="")return{isValid:!0};const f=Number(n);return isNaN(f)||f>i?{isValid:!1,message:`值不能大於 ${i}`}:{isValid:!0}}static pattern(n,i){return n?i.test(n)?{isValid:!0}:{isValid:!1,message:"格式不正確"}:{isValid:!0}}static email(n){return n?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)?{isValid:!0}:{isValid:!1,message:"請輸入有效的電子郵件地址"}:{isValid:!0}}static phone(n){return n?/^(\+886|0)?[0-9]{8,10}$/.test(n.replace(/[\s-]/g,""))?{isValid:!0}:{isValid:!1,message:"請輸入有效的電話號碼"}:{isValid:!0}}static url(n){if(!n)return{isValid:!0};try{return new URL(n),{isValid:!0}}catch{return{isValid:!1,message:"請輸入有效的網址"}}}static number(n){if(n==null||n==="")return{isValid:!0};const i=Number(n);return isNaN(i)?{isValid:!1,message:"請輸入有效的數字"}:{isValid:!0}}static positiveNumber(n){if(n==null||n==="")return{isValid:!0};const i=Number(n);return isNaN(i)||i<=0?{isValid:!1,message:"請輸入大於 0 的數字"}:{isValid:!0}}static integer(n){if(n==null||n==="")return{isValid:!0};const i=Number(n);return isNaN(i)||!Number.isInteger(i)?{isValid:!1,message:"請輸入整數"}:{isValid:!0}}static date(n){if(!n)return{isValid:!0};const i=new Date(n);return isNaN(i.getTime())?{isValid:!1,message:"請輸入有效的日期"}:{isValid:!0}}static dateRange(n,i){if(!n||!i)return{isValid:!0};const f=new Date(n),B=new Date(i);return isNaN(f.getTime())||isNaN(B.getTime())?{isValid:!1,message:"請輸入有效的日期"}:f>=B?{isValid:!1,message:"結束日期必須晚於開始日期"}:{isValid:!0}}}function P(d,n){if(n.required){const i=$.required(d);if(!i.isValid)return i}if(!d&&!n.required)return{isValid:!0};if(n.minLength!==void 0){const i=$.minLength(d,n.minLength);if(!i.isValid)return i}if(n.maxLength!==void 0){const i=$.maxLength(d,n.maxLength);if(!i.isValid)return i}if(n.min!==void 0){const i=$.min(d,n.min);if(!i.isValid)return i}if(n.max!==void 0){const i=$.max(d,n.max);if(!i.isValid)return i}if(n.pattern){const i=$.pattern(d,n.pattern);if(!i.isValid)return i}if(n.email){const i=$.email(d);if(!i.isValid)return i}if(n.phone){const i=$.phone(d);if(!i.isValid)return i}if(n.url){const i=$.url(d);if(!i.isValid)return i}if(n.number){const i=$.number(d);if(!i.isValid)return i}if(n.positiveNumber){const i=$.positiveNumber(d);if(!i.isValid)return i}if(n.integer){const i=$.integer(d);if(!i.isValid)return i}if(n.date){const i=$.date(d);if(!i.isValid)return i}if(n.custom){const i=n.custom(d);if(!i.isValid)return i}return{isValid:!0}}function J(d,n){const i={};return Object.keys(n).forEach(f=>{const B=d[f],r=n[f],E=P(B,r);E.isValid||(i[f]=E.message||"驗證失敗")}),Object.keys(n).forEach(f=>{const B=n[f];if(B.dateRange){const{startField:r,endField:E}=B.dateRange;if(r&&E){const o=d[r],l=d[E],S=$.dateRange(o,l);S.isValid||(i[E]=S.message||"日期範圍無效")}}}),i}function A(d){return Object.keys(d).length===0}function K(d,n,i={}){const{validateOnInput:f=!1,validateOnBlur:B=!1,validateOnChange:r=!0,debounceMs:E=300}=i,o=O({}),l=O(!1);let S=null;const N=M(()=>A(o.value)),_=()=>{console.log("🔍 執行完整表單驗證..."),l.value=!0;try{const u=J(d.value,n);o.value=u;const F=A(u);return console.log(`✅ 表單驗證${F?"通過":"失敗"}:`,u),F}finally{l.value=!1}},V=u=>{console.log(`🔍 驗證欄位: ${u}`);const F=n[u];if(!F)return console.warn(`⚠️ 找不到欄位 ${u} 的驗證規則`),!0;l.value=!0;try{const w=d.value[u],q=P(w,F);if(q.isValid){const{[u]:_t,...D}=o.value;o.value=D,console.log(`✅ 欄位 ${u} 驗證通過`)}else o.value={...o.value,[u]:q.message||"驗證失敗"},console.log(`❌ 欄位 ${u} 驗證失敗: ${q.message}`);return q.isValid}finally{l.value=!1}},j=u=>{S&&clearTimeout(S),S=setTimeout(()=>{_()},E)},C=u=>{if(u){const F={...o.value};u.forEach(w=>{delete F[w]}),o.value=F,console.log(`🧹 清除指定欄位錯誤: ${u.join(", ")}`)}else o.value={},console.log("🧹 清除所有錯誤")},m=u=>{const{[u]:F,...w}=o.value;o.value=w,console.log(`🧹 清除欄位錯誤: ${u}`)},e=(u,F)=>{o.value={...o.value,[u]:F},console.log(`❌ 設置欄位錯誤: ${u} = ${F}`)},s=u=>{o.value={...o.value,...u},console.log("❌ 設置多個錯誤:",u)},h=u=>u in o.value,R=u=>o.value[u];return r&&T(d,()=>{E>0?j():_()},{deep:!0}),{errors:o,isValid:N,isValidating:l,validateAll:_,validateSingleField:V,clearErrors:C,clearFieldError:m,setError:e,setErrors:s,hasError:h,getFieldError:R}}const Q={project_name:{required:!0,minLength:2,maxLength:100},contract_number:{required:!0,minLength:3,maxLength:50,pattern:/^[A-Z0-9\-_]+$/},project_location:{required:!0,minLength:5,maxLength:200},host_agency:{required:!0,minLength:2,maxLength:100},supervision_unit:{minLength:2,maxLength:100},contractor_name:{minLength:2,maxLength:100},construction_period:{integer:!0,min:1,max:3650},project_amount:{required:!0,positiveNumber:!0,min:1e3},project_grade:{required:!0},project_category:{required:!0},funding_source:{required:!0},start_date:{required:!0,date:!0},completion_date:{required:!0,date:!0,dateRange:{startField:"start_date",endField:"completion_date"}},payment_method:{},advance_payment_ratio:{number:!0,min:0,max:100},retention_ratio:{number:!0,min:0,max:100},insurance_policy_number:{required:!0,minLength:5,maxLength:50},insurance_company:{minLength:2,maxLength:100},insurance_start_date:{required:!0,date:!0},insurance_end_date:{required:!0,date:!0,dateRange:{startField:"insurance_start_date",endField:"insurance_end_date"}},insurance_type:{required:!0}},W={class:"project-form"},X={class:"row mb-3"},Y={class:"col-lg-5 col-md-6"},ee=["disabled"],te={key:0,class:"invalid-feedback"},ne={class:"col-lg-3 col-md-3"},se=["disabled"],oe={key:0,class:"invalid-feedback"},ie={class:"col-lg-2 col-md-3"},le=["disabled"],ae={key:0,class:"invalid-feedback"},re={class:"row mb-3"},ue={class:"col-lg-6 col-md-6"},de=["disabled"],me={key:0,class:"invalid-feedback"},pe={class:"col-lg-3 col-md-3"},ce={class:"col-lg-3 col-md-3"},ve={class:"row mb-3"},ge={class:"col-lg-4 col-md-6"},_e=["disabled"],be={key:0,class:"invalid-feedback"},fe={class:"col-lg-4 col-md-6"},ye=["disabled"],Ve={key:0,class:"invalid-feedback"},je={class:"col-lg-2 col-md-6"},xe=["disabled"],ke={key:0,class:"invalid-feedback"},$e={class:"col-lg-2 col-md-6"},Ee=["disabled"],Fe={key:0,class:"invalid-feedback"},Be={class:"row mb-3"},Se={class:"col-lg-6 col-md-6"},he=["disabled"],we={key:0,class:"invalid-feedback"},Ue={class:"col-lg-6 col-md-6"},Le=["disabled"],Ne={key:0,class:"invalid-feedback"},qe={class:"row mb-3"},Ce={class:"col-lg-6 col-md-6"},Ie={class:"input-group"},Oe=["disabled"],Te={key:0,class:"invalid-feedback"},Re={class:"col-lg-3 col-md-3"},Ae={class:"col-lg-3 col-md-3"},Me={class:"input-group"},Pe={class:"row mb-3"},De={class:"col-lg-3 col-md-4"},ze={class:"input-group"},Ze={class:"mb-3"},Ge={class:"mt-2"},He={class:"form-check form-check-inline"},Je={class:"form-check form-check-inline"},Ke={class:"form-check form-check-inline"},Qe={class:"row mb-3"},We={class:"col-lg-4 col-md-6"},Xe=["disabled"],Ye={key:0,class:"invalid-feedback"},et={class:"col-lg-4 col-md-6"},tt={class:"col-lg-4 col-md-12"},nt=["disabled"],st={key:0,class:"invalid-feedback"},ot={class:"row mb-3"},it={class:"col-lg-6 col-md-6"},lt=["disabled"],at={key:0,class:"invalid-feedback"},rt={class:"col-lg-6 col-md-6"},ut=["disabled"],dt={key:0,class:"invalid-feedback"},mt={key:0,class:"alert alert-danger mt-4"},pt={class:"mb-0"},ct={key:1,class:"d-flex justify-content-end mt-4"},vt=["disabled"],gt=["disabled"],ft=z({__name:"ProjectForm",props:{modelValue:{},isSubmitting:{type:Boolean},showSubmitButton:{type:Boolean},submitButtonText:{},showResetButton:{type:Boolean}},emits:["update:modelValue","submit","reset"],setup(d,{expose:n,emit:i}){const f=d,B={modelValue:{},isSubmitting:!1,showSubmitButton:!0,submitButtonText:"保存",showResetButton:!0},r=M(()=>({...B,...f})),E=i,o=O({project_name:"",contract_number:"",project_location:"",host_agency:"",supervision_unit:"",contractor_name:"",construction_period:"",project_amount:"",project_grade:"",project_category:"",funding_source:"",start_date:"",completion_date:"",payment_method:"",advance_payment_ratio:"",retention_ratio:"",inspection_methods:[],insurance_policy_number:"",insurance_company:"",insurance_start_date:"",insurance_end_date:"",insurance_type:""}),l=K(o,Q,{validateOnInput:!1,validateOnBlur:!0,validateOnChange:!1,debounceMs:300});T(()=>f.modelValue,m=>{m&&(o.value={...o.value,...m})},{deep:!0,immediate:!0}),T(o,m=>{E("update:modelValue",m)},{deep:!0});const S=async()=>{console.log("🔍 開始表單驗證..."),console.log("📊 ProjectForm 當前數據:",o.value);const m=l.validateAll();if(console.log("🔍 驗證結果:",{isValid:m,errors:l.errors.value,errorCount:Object.keys(l.errors.value).length}),m)console.log("✅ 表單驗證通過，提交數據"),E("submit",o.value);else{console.log("❌ 表單驗證失敗，顯示錯誤訊息"),console.log("🚨 錯誤詳情:",l.errors.value),await H();const e=Object.keys(l.errors.value).length;console.log(`📝 共有 ${e} 個驗證錯誤需要修正`)}},N=()=>{Object.keys(o.value).forEach(m=>{Array.isArray(o.value[m])?o.value[m]=[]:o.value[m]=""}),l.clearErrors(),E("reset")},_=m=>{const e="form-control",s="form-select",h=["project_grade","project_category","funding_source","payment_method","insurance_type"].includes(m),u=l.hasError(m)?"is-invalid":"";return`${h?s:e} ${u}`.trim()},V=m=>{l.clearFieldError(m)},j=m=>{l.validateSingleField(m)},C=m=>({project_name:"工程名稱",contract_number:"契約編號",project_location:"工程地點",host_agency:"主辦機關",supervision_unit:"監造單位",contractor_name:"承包商名稱",construction_period:"工期天數",project_amount:"工程金額",project_grade:"工程等級分類",project_category:"工程類別",funding_source:"經費來源",start_date:"開工日期",completion_date:"完工日期",payment_method:"付款方式",advance_payment_ratio:"預付款比例",retention_ratio:"保留款比例",inspection_methods:"驗收方式",insurance_policy_number:"保險單編號",insurance_company:"保險公司名稱",insurance_start_date:"保險開始日期",insurance_end_date:"保險結束日期",insurance_type:"保險類型"})[m]||m;return n({handleSubmit:S,handleReset:N,validation:l}),(m,e)=>(g(),v("div",W,[e[90]||(e[90]=t("h6",{class:"fw-bold text-theme mb-3"},[t("i",{class:"fa fa-info-circle me-2"}),p("工程基本資訊 ")],-1)),t("div",X,[t("div",Y,[e[54]||(e[54]=t("label",{class:"form-label"},[p("工程名稱 "),t("span",{class:"text-danger"},"*")],-1)),c(t("input",{type:"text",class:k(_("project_name")),"onUpdate:modelValue":e[0]||(e[0]=s=>o.value.project_name=s),name:"project_name",placeholder:"請輸入工程名稱",disabled:r.value.isSubmitting,onInput:e[1]||(e[1]=s=>V("project_name")),onBlur:e[2]||(e[2]=s=>j("project_name"))},null,42,ee),[[x,o.value.project_name]]),a(l).hasError("project_name")?(g(),v("div",te,y(a(l).getFieldError("project_name")),1)):b("",!0)]),t("div",ne,[e[55]||(e[55]=t("label",{class:"form-label"},[p("契約編號 "),t("span",{class:"text-danger"},"*")],-1)),c(t("input",{type:"text",class:k(_("contract_number")),"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.contract_number=s),name:"contract_number",placeholder:"請輸入契約編號",disabled:r.value.isSubmitting,onInput:e[4]||(e[4]=s=>V("contract_number")),onBlur:e[5]||(e[5]=s=>j("contract_number"))},null,42,se),[[x,o.value.contract_number]]),a(l).hasError("contract_number")?(g(),v("div",oe,y(a(l).getFieldError("contract_number")),1)):b("",!0)]),t("div",ie,[e[57]||(e[57]=t("label",{class:"form-label"},[p("工程等級分類 "),t("span",{class:"text-danger"},"*")],-1)),c(t("select",{class:k(_("project_grade")),"onUpdate:modelValue":e[6]||(e[6]=s=>o.value.project_grade=s),name:"project_grade",disabled:r.value.isSubmitting,onChange:e[7]||(e[7]=s=>V("project_grade")),onBlur:e[8]||(e[8]=s=>j("project_grade"))},e[56]||(e[56]=[L('<option value="">-- 請選擇 --</option><option value="甲等">甲等</option><option value="乙等">乙等</option><option value="丙等">丙等</option><option value="丁等">丁等</option><option value="1">1級</option><option value="2">2級</option><option value="3">3級</option><option value="4">4級</option><option value="5">5級</option><option value="6">6級</option><option value="7">7級</option><option value="8">8級</option><option value="9">9級</option><option value="10">10級</option>',15)]),42,le),[[U,o.value.project_grade]]),a(l).hasError("project_grade")?(g(),v("div",ae,y(a(l).getFieldError("project_grade")),1)):b("",!0)])]),t("div",re,[t("div",ue,[e[58]||(e[58]=t("label",{class:"form-label"},[p("工程地點 "),t("span",{class:"text-danger"},"*")],-1)),c(t("input",{type:"text",class:k(_("project_location")),"onUpdate:modelValue":e[9]||(e[9]=s=>o.value.project_location=s),name:"project_location",placeholder:"請輸入工程地點",disabled:r.value.isSubmitting,onInput:e[10]||(e[10]=s=>V("project_location")),onBlur:e[11]||(e[11]=s=>j("project_location"))},null,42,de),[[x,o.value.project_location]]),a(l).hasError("project_location")?(g(),v("div",me,y(a(l).getFieldError("project_location")),1)):b("",!0)]),t("div",pe,[e[59]||(e[59]=t("label",{class:"form-label"},"承包商名稱",-1)),c(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[12]||(e[12]=s=>o.value.contractor_name=s),name:"contractor_name",placeholder:"請輸入承包商名稱"},null,512),[[x,o.value.contractor_name]])]),t("div",ce,[e[60]||(e[60]=t("label",{class:"form-label"},"工期（天）",-1)),c(t("input",{type:"number",class:"form-control","onUpdate:modelValue":e[13]||(e[13]=s=>o.value.construction_period=s),name:"construction_period",placeholder:"請輸入工期"},null,512),[[x,o.value.construction_period]])])]),t("div",ve,[t("div",ge,[e[62]||(e[62]=t("label",{class:"form-label"},[p("工程類別/工程屬性 "),t("span",{class:"text-danger"},"*")],-1)),c(t("select",{class:k(_("project_category")),"onUpdate:modelValue":e[14]||(e[14]=s=>o.value.project_category=s),name:"project_category",disabled:r.value.isSubmitting,onChange:e[15]||(e[15]=s=>V("project_category")),onBlur:e[16]||(e[16]=s=>j("project_category"))},e[61]||(e[61]=[L('<option value="">-- 請選擇工程類別 --</option><option value="建築工程">建築工程</option><option value="土木工程">土木工程</option><option value="水利工程">水利工程</option><option value="機電工程">機電工程</option>',5)]),42,_e),[[U,o.value.project_category]]),a(l).hasError("project_category")?(g(),v("div",be,y(a(l).getFieldError("project_category")),1)):b("",!0)]),t("div",fe,[e[64]||(e[64]=t("label",{class:"form-label"},[p("計畫來源/經費來源 "),t("span",{class:"text-danger"},"*")],-1)),c(t("select",{class:k(_("funding_source")),"onUpdate:modelValue":e[17]||(e[17]=s=>o.value.funding_source=s),name:"funding_source",disabled:r.value.isSubmitting,onChange:e[18]||(e[18]=s=>V("funding_source")),onBlur:e[19]||(e[19]=s=>j("funding_source"))},e[63]||(e[63]=[L('<option value="">-- 請選擇經費來源 --</option><option value="前瞻基礎建設計畫">前瞻基礎建設計畫</option><option value="一般預算">一般預算</option><option value="專案補助">專案補助</option><option value="特別預算">特別預算</option><option value="其他">其他</option>',6)]),42,ye),[[U,o.value.funding_source]]),a(l).hasError("funding_source")?(g(),v("div",Ve,y(a(l).getFieldError("funding_source")),1)):b("",!0)]),t("div",je,[e[65]||(e[65]=t("label",{class:"form-label"},[p("開工日期 "),t("span",{class:"text-danger"},"*")],-1)),c(t("input",{type:"date",class:k(_("start_date")),"onUpdate:modelValue":e[20]||(e[20]=s=>o.value.start_date=s),name:"start_date",disabled:r.value.isSubmitting,onInput:e[21]||(e[21]=s=>V("start_date")),onBlur:e[22]||(e[22]=s=>j("start_date"))},null,42,xe),[[x,o.value.start_date]]),a(l).hasError("start_date")?(g(),v("div",ke,y(a(l).getFieldError("start_date")),1)):b("",!0)]),t("div",$e,[e[66]||(e[66]=t("label",{class:"form-label"},[p("完工日期 "),t("span",{class:"text-danger"},"*")],-1)),c(t("input",{type:"date",class:k(_("completion_date")),"onUpdate:modelValue":e[23]||(e[23]=s=>o.value.completion_date=s),name:"completion_date",disabled:r.value.isSubmitting,onInput:e[24]||(e[24]=s=>V("completion_date")),onBlur:e[25]||(e[25]=s=>j("completion_date"))},null,42,Ee),[[x,o.value.completion_date]]),a(l).hasError("completion_date")?(g(),v("div",Fe,y(a(l).getFieldError("completion_date")),1)):b("",!0)])]),e[91]||(e[91]=t("h6",{class:"fw-bold text-theme mb-3 mt-4"},[t("i",{class:"fa fa-users me-2"}),p("參與單位資訊 ")],-1)),t("div",Be,[t("div",Se,[e[67]||(e[67]=t("label",{class:"form-label"},[p("主辦機關 "),t("span",{class:"text-danger"},"*")],-1)),c(t("input",{type:"text",class:k(_("host_agency")),"onUpdate:modelValue":e[26]||(e[26]=s=>o.value.host_agency=s),name:"host_agency",placeholder:"請輸入主辦機關",disabled:r.value.isSubmitting,onInput:e[27]||(e[27]=s=>V("host_agency")),onBlur:e[28]||(e[28]=s=>j("host_agency"))},null,42,he),[[x,o.value.host_agency]]),a(l).hasError("host_agency")?(g(),v("div",we,y(a(l).getFieldError("host_agency")),1)):b("",!0)]),t("div",Ue,[e[68]||(e[68]=t("label",{class:"form-label"},[p("監造單位 "),t("span",{class:"text-danger"},"*")],-1)),c(t("input",{type:"text",class:k(_("supervision_unit")),"onUpdate:modelValue":e[29]||(e[29]=s=>o.value.supervision_unit=s),name:"supervision_unit",placeholder:"請輸入監造單位",disabled:r.value.isSubmitting,onInput:e[30]||(e[30]=s=>V("supervision_unit")),onBlur:e[31]||(e[31]=s=>j("supervision_unit"))},null,42,Le),[[x,o.value.supervision_unit]]),a(l).hasError("supervision_unit")?(g(),v("div",Ne,y(a(l).getFieldError("supervision_unit")),1)):b("",!0)])]),e[92]||(e[92]=t("h6",{class:"fw-bold text-theme mb-3 mt-4"},[t("i",{class:"fa fa-money-bill me-2"}),p("工程金額與付款 ")],-1)),t("div",qe,[t("div",Ce,[e[70]||(e[70]=t("label",{class:"form-label"},[p("工程金額 "),t("span",{class:"text-danger"},"*")],-1)),t("div",Ie,[e[69]||(e[69]=t("span",{class:"input-group-text"},"NT$",-1)),c(t("input",{type:"number",class:k(_("project_amount")),"onUpdate:modelValue":e[32]||(e[32]=s=>o.value.project_amount=s),name:"project_amount",placeholder:"請輸入工程金額",disabled:r.value.isSubmitting,onInput:e[33]||(e[33]=s=>V("project_amount")),onBlur:e[34]||(e[34]=s=>j("project_amount"))},null,42,Oe),[[x,o.value.project_amount]])]),a(l).hasError("project_amount")?(g(),v("div",Te,y(a(l).getFieldError("project_amount")),1)):b("",!0)]),t("div",Re,[e[72]||(e[72]=t("label",{class:"form-label"},"付款方式",-1)),c(t("select",{class:"form-select","onUpdate:modelValue":e[35]||(e[35]=s=>o.value.payment_method=s),name:"payment_method"},e[71]||(e[71]=[L('<option value="">-- 請選擇 --</option><option value="按月計價">按月計價</option><option value="按完工百分比">按完工百分比</option><option value="分期付款">分期付款</option><option value="完工後一次付款">完工後一次付款</option>',5)]),512),[[U,o.value.payment_method]])]),t("div",Ae,[e[74]||(e[74]=t("label",{class:"form-label"},"預付款比例（%）",-1)),t("div",Me,[c(t("input",{type:"number",class:"form-control","onUpdate:modelValue":e[36]||(e[36]=s=>o.value.advance_payment_ratio=s),name:"advance_payment_ratio",placeholder:"例：10",min:"0",max:"100"},null,512),[[x,o.value.advance_payment_ratio]]),e[73]||(e[73]=t("span",{class:"input-group-text"},"%",-1))])])]),t("div",Pe,[t("div",De,[e[76]||(e[76]=t("label",{class:"form-label"},"保留款比例（%）",-1)),t("div",ze,[c(t("input",{type:"number",class:"form-control","onUpdate:modelValue":e[37]||(e[37]=s=>o.value.retention_ratio=s),name:"retention_ratio",placeholder:"例：5",min:"0",max:"100"},null,512),[[x,o.value.retention_ratio]]),e[75]||(e[75]=t("span",{class:"input-group-text"},"%",-1))])])]),e[93]||(e[93]=t("h6",{class:"fw-bold text-theme mb-3 mt-4"},[t("i",{class:"fa fa-check-circle me-2"}),p("驗收管理 ")],-1)),t("div",Ze,[e[80]||(e[80]=t("label",{class:"form-label"},"驗收方式/驗收階段（可複選）",-1)),t("div",Ge,[t("div",He,[c(t("input",{class:"form-check-input",type:"checkbox",value:"分段驗收","onUpdate:modelValue":e[38]||(e[38]=s=>o.value.inspection_methods=s),id:"inspection1"},null,512),[[I,o.value.inspection_methods]]),e[77]||(e[77]=t("label",{class:"form-check-label",for:"inspection1"}," 分段驗收 ",-1))]),t("div",Je,[c(t("input",{class:"form-check-input",type:"checkbox",value:"部分驗收","onUpdate:modelValue":e[39]||(e[39]=s=>o.value.inspection_methods=s),id:"inspection2"},null,512),[[I,o.value.inspection_methods]]),e[78]||(e[78]=t("label",{class:"form-check-label",for:"inspection2"}," 部分驗收 ",-1))]),t("div",Ke,[c(t("input",{class:"form-check-input",type:"checkbox",value:"竣工驗收","onUpdate:modelValue":e[40]||(e[40]=s=>o.value.inspection_methods=s),id:"inspection3"},null,512),[[I,o.value.inspection_methods]]),e[79]||(e[79]=t("label",{class:"form-check-label",for:"inspection3"}," 竣工驗收 ",-1))])])]),e[94]||(e[94]=t("h6",{class:"fw-bold text-theme mb-3 mt-4"},[t("i",{class:"fa fa-shield-alt me-2"}),p("保險相關資訊 ")],-1)),t("div",Qe,[t("div",We,[e[81]||(e[81]=t("label",{class:"form-label"},[p("保險單編號 "),t("span",{class:"text-danger"},"*")],-1)),c(t("input",{type:"text",class:k(_("insurance_policy_number")),"onUpdate:modelValue":e[41]||(e[41]=s=>o.value.insurance_policy_number=s),name:"insurance_policy_number",placeholder:"請輸入保險單編號",disabled:r.value.isSubmitting,onInput:e[42]||(e[42]=s=>V("insurance_policy_number")),onBlur:e[43]||(e[43]=s=>j("insurance_policy_number"))},null,42,Xe),[[x,o.value.insurance_policy_number]]),a(l).hasError("insurance_policy_number")?(g(),v("div",Ye,y(a(l).getFieldError("insurance_policy_number")),1)):b("",!0)]),t("div",et,[e[82]||(e[82]=t("label",{class:"form-label"},"保險公司名稱",-1)),c(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[44]||(e[44]=s=>o.value.insurance_company=s),name:"insurance_company",placeholder:"請輸入保險公司名稱"},null,512),[[x,o.value.insurance_company]])]),t("div",tt,[e[84]||(e[84]=t("label",{class:"form-label"},[p("保險類型 "),t("span",{class:"text-danger"},"*")],-1)),c(t("select",{class:k(_("insurance_type")),"onUpdate:modelValue":e[45]||(e[45]=s=>o.value.insurance_type=s),name:"insurance_type",disabled:r.value.isSubmitting,onChange:e[46]||(e[46]=s=>V("insurance_type")),onBlur:e[47]||(e[47]=s=>j("insurance_type"))},e[83]||(e[83]=[L('<option value="">-- 請選擇保險類型 --</option><option value="工程險">工程險</option><option value="雇主責任險">雇主責任險</option><option value="第三人責任險">第三人責任險</option><option value="專業責任險">專業責任險</option><option value="產品責任險">產品責任險</option><option value="綜合保險">綜合保險</option>',7)]),42,nt),[[U,o.value.insurance_type]]),a(l).hasError("insurance_type")?(g(),v("div",st,y(a(l).getFieldError("insurance_type")),1)):b("",!0)])]),t("div",ot,[t("div",it,[e[85]||(e[85]=t("label",{class:"form-label"},[p("保險有效期限（起） "),t("span",{class:"text-danger"},"*")],-1)),c(t("input",{type:"date",class:k(_("insurance_start_date")),"onUpdate:modelValue":e[48]||(e[48]=s=>o.value.insurance_start_date=s),name:"insurance_start_date",disabled:r.value.isSubmitting,onInput:e[49]||(e[49]=s=>V("insurance_start_date")),onBlur:e[50]||(e[50]=s=>j("insurance_start_date"))},null,42,lt),[[x,o.value.insurance_start_date]]),a(l).hasError("insurance_start_date")?(g(),v("div",at,y(a(l).getFieldError("insurance_start_date")),1)):b("",!0)]),t("div",rt,[e[86]||(e[86]=t("label",{class:"form-label"},[p("保險有效期限（訖） "),t("span",{class:"text-danger"},"*")],-1)),c(t("input",{type:"date",class:k(_("insurance_end_date")),"onUpdate:modelValue":e[51]||(e[51]=s=>o.value.insurance_end_date=s),name:"insurance_end_date",disabled:r.value.isSubmitting,onInput:e[52]||(e[52]=s=>V("insurance_end_date")),onBlur:e[53]||(e[53]=s=>j("insurance_end_date"))},null,42,ut),[[x,o.value.insurance_end_date]]),a(l).hasError("insurance_end_date")?(g(),v("div",dt,y(a(l).getFieldError("insurance_end_date")),1)):b("",!0)])]),Object.keys(a(l).errors.value).length>0?(g(),v("div",mt,[e[87]||(e[87]=t("h6",{class:"alert-heading"},[t("i",{class:"fa fa-exclamation-triangle me-2"}),p(" 表單驗證錯誤 ")],-1)),e[88]||(e[88]=t("p",{class:"mb-2"},"請修正以下錯誤：",-1)),t("ul",pt,[(g(!0),v(Z,null,G(a(l).errors.value,(s,h)=>(g(),v("li",{key:h,class:"mb-1"},[t("strong",null,y(C(String(h)))+"：",1),p(y(s),1)]))),128))])])):b("",!0),r.value.showSubmitButton||r.value.showResetButton?(g(),v("div",ct,[r.value.showResetButton?(g(),v("button",{key:0,type:"button",class:"btn btn-outline-secondary me-2",onClick:N,disabled:r.value.isSubmitting||a(l).isValidating.value},e[89]||(e[89]=[t("i",{class:"fa fa-undo me-1"},null,-1),p(" 重置 ")]),8,vt)):b("",!0),r.value.showSubmitButton?(g(),v("button",{key:1,type:"button",class:"btn btn-theme",onClick:S,disabled:r.value.isSubmitting||a(l).isValidating.value},[t("i",{class:k(["fa me-1",{"fa-spin fa-spinner":r.value.isSubmitting||a(l).isValidating.value,"fa-save":!r.value.isSubmitting&&!a(l).isValidating.value}])},null,2),p(" "+y(r.value.isSubmitting||a(l).isValidating.value?"處理中...":r.value.submitButtonText),1)],8,gt)):b("",!0)])):b("",!0)]))}});export{ft as _};
