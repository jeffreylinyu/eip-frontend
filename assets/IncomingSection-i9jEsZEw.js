import{d as N,u as M,r as x,C as p,o as L,f,g as b,h as t,n as l,k as d,p as o,F as R,G as u,i as S,H as A,I as q,j as c,v as _,y as B,J as m,t as v,_ as j}from"./index-D_u9nkte.js";const D={class:"incoming-section"},F={class:"row"},H={class:"col-md-3 mb-2"},O=["onUpdate:modelValue"],P={class:"col-md-2 mb-2"},Q=["onUpdate:modelValue"],G={class:"col-md-2 mb-2"},J=["onUpdate:modelValue"],$={class:"col-md-2 mb-2"},z=["onUpdate:modelValue"],K={class:"col-md-2 mb-2"},W=["onUpdate:modelValue"],X={class:"col-md-1 mb-2 d-flex align-items-end"},Y=["onClick"],Z={key:0,class:"text-center text-muted py-4"},tt={class:"row mt-4"},st={class:"col-md-3"},et={class:"mb-1"},lt={class:"col-md-3"},ot={class:"mb-1"},at={class:"col-md-3"},nt={class:"mb-1"},it={class:"col-md-3"},dt={class:"mb-1"},ut={class:"d-flex justify-content-between mt-4"},ct={class:"d-flex gap-2"},mt=["disabled"],rt=["disabled"],pt=N({__name:"IncomingSection",setup(ft){const g=M(),i=x([]),r=x(!1),h=p(()=>i.value.length),C=p(()=>i.value.filter(a=>a.itemType==="MATERIAL").length),k=p(()=>i.value.filter(a=>a.itemType==="EQUIPMENT").length),I=p(()=>i.value.filter(a=>a.itemType==="MISCELLANEOUS").length),U=()=>{i.value.push({itemName:"",itemType:"MATERIAL",quantity:0,unit:"",remarks:""})},V=a=>{i.value.splice(a,1)},w=async()=>{r.value=!0;try{console.log("儲存進場紀錄:",i.value)}catch(a){console.error("儲存失敗:",a)}finally{r.value=!1}},T=()=>{g.push("/daily-report/equipment")},E=()=>{g.push("/daily-report/inspection")};return L(()=>{console.log("載入進場紀錄資料")}),(a,s)=>(b(),f("div",D,[t("div",{class:"d-flex justify-content-between align-items-center mb-4"},[s[1]||(s[1]=t("div",null,[t("h4",{class:"mb-1"},"進場材料/機具/雜項紀錄"),t("p",{class:"text-muted mb-0"},"記錄當日進場的材料、機具和雜項")],-1)),t("div",{class:"d-flex gap-2"},[t("button",{class:"btn btn-outline-primary",onClick:U},s[0]||(s[0]=[t("i",{class:"fa fa-plus me-1"},null,-1),d("新增紀錄 ")]))])]),l(m,null,{default:o(()=>[l(R,null,{default:o(()=>s[2]||(s[2]=[t("h6",{class:"mb-0"},[t("i",{class:"fa fa-truck me-2"}),d("進場材料/機具/雜項紀錄 ")],-1)])),_:1,__:[2]}),l(u,null,{default:o(()=>[(b(!0),f(A,null,q(i.value,(e,y)=>(b(),f("div",{key:e.id||y,class:"mb-3"},[t("div",F,[t("div",H,[s[3]||(s[3]=t("label",{class:"form-label"},"項目名稱",-1)),c(t("input",{type:"text",class:"form-control","onUpdate:modelValue":n=>e.itemName=n,placeholder:"請輸入項目名稱"},null,8,O),[[_,e.itemName]])]),t("div",P,[s[5]||(s[5]=t("label",{class:"form-label"},"類型",-1)),c(t("select",{class:"form-select","onUpdate:modelValue":n=>e.itemType=n},s[4]||(s[4]=[t("option",{value:"MATERIAL"},"材料",-1),t("option",{value:"EQUIPMENT"},"機具",-1),t("option",{value:"MISCELLANEOUS"},"雜項",-1)]),8,Q),[[B,e.itemType]])]),t("div",G,[s[6]||(s[6]=t("label",{class:"form-label"},"數量",-1)),c(t("input",{type:"number",class:"form-control","onUpdate:modelValue":n=>e.quantity=n,min:"0",step:"0.01",placeholder:"0"},null,8,J),[[_,e.quantity]])]),t("div",$,[s[7]||(s[7]=t("label",{class:"form-label"},"單位",-1)),c(t("input",{type:"text",class:"form-control","onUpdate:modelValue":n=>e.unit=n,placeholder:"單位"},null,8,z),[[_,e.unit]])]),t("div",K,[s[8]||(s[8]=t("label",{class:"form-label"},"備註",-1)),c(t("input",{type:"text",class:"form-control","onUpdate:modelValue":n=>e.remarks=n,placeholder:"備註"},null,8,W),[[_,e.remarks]])]),t("div",X,[t("button",{class:"btn btn-outline-danger",onClick:n=>V(y),title:"刪除"},s[9]||(s[9]=[t("i",{class:"fa fa-trash"},null,-1)]),8,Y)])])]))),128)),i.value.length===0?(b(),f("div",Z,s[10]||(s[10]=[t("i",{class:"fa fa-truck fa-2x mb-2"},null,-1),t("p",{class:"mb-0"},"尚未新增任何進場紀錄",-1)]))):S("",!0)]),_:1})]),_:1}),t("div",tt,[t("div",st,[l(m,{class:"bg-primary text-white"},{default:o(()=>[l(u,{class:"text-center"},{default:o(()=>[t("h4",et,v(h.value),1),s[11]||(s[11]=t("p",{class:"mb-0"},"總紀錄數",-1))]),_:1,__:[11]})]),_:1})]),t("div",lt,[l(m,{class:"bg-success text-white"},{default:o(()=>[l(u,{class:"text-center"},{default:o(()=>[t("h4",ot,v(C.value),1),s[12]||(s[12]=t("p",{class:"mb-0"},"材料項目",-1))]),_:1,__:[12]})]),_:1})]),t("div",at,[l(m,{class:"bg-warning text-white"},{default:o(()=>[l(u,{class:"text-center"},{default:o(()=>[t("h4",nt,v(k.value),1),s[13]||(s[13]=t("p",{class:"mb-0"},"機具項目",-1))]),_:1,__:[13]})]),_:1})]),t("div",it,[l(m,{class:"bg-info text-white"},{default:o(()=>[l(u,{class:"text-center"},{default:o(()=>[t("h4",dt,v(I.value),1),s[14]||(s[14]=t("p",{class:"mb-0"},"雜項項目",-1))]),_:1,__:[14]})]),_:1})])]),t("div",ut,[t("button",{class:"btn btn-outline-secondary",onClick:T},s[15]||(s[15]=[t("i",{class:"fa fa-arrow-left me-1"},null,-1),d("返回機具頁面 ")])),t("div",ct,[t("button",{class:"btn btn-primary",onClick:w,disabled:r.value},s[16]||(s[16]=[t("i",{class:"fa fa-save me-1"},null,-1),d("儲存 ")]),8,mt),t("button",{class:"btn btn-success",onClick:E,disabled:r.value},s[17]||(s[17]=[d(" 下一步 "),t("i",{class:"fa fa-arrow-right ms-1"},null,-1)]),8,rt)])])]))}}),_t=j(pt,[["__scopeId","data-v-e246688f"]]);export{_t as default};
