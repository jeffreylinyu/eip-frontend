import{d as L,E as j,r as g,k as i,a as W,e as u,f as c,l as t,m as J,v as n,s as m,z as x,i as a,p as l,q as D,x as p,I as f,J as b,C as v,F as _,y,Q as R,_ as z}from"./index-CB9Z8Gmd.js";import{W as H}from"./dailyReport-CO5OWQqK.js";const Q={class:"daily-report-overview"},Y={class:"d-flex justify-content-between align-items-center mb-4"},$={class:"text-muted mb-0"},G={class:"d-flex gap-2"},K=["disabled"],X=["disabled"],Z=["disabled"],tt={class:"mb-4"},st={class:"d-flex align-items-center"},et={class:"text-muted fs-sm"},ot={class:"row mb-4"},at={class:"col-lg-8"},lt={class:"row"},nt={class:"col-md-6 mb-3"},rt={class:"col-md-6 mb-3"},it={class:"input-group"},dt={class:"col-md-4 mb-3"},ut={class:"input-group"},ct={class:"col-md-4 mb-3"},mt={class:"input-group"},pt={class:"col-md-4 mb-3"},ft={class:"input-group"},vt={class:"col-lg-4"},bt={class:"mb-3"},_t=["value"],yt={class:"mb-3"},gt=["value"],Dt={class:"row mb-4"},wt={class:"col-md-3"},Et={class:"mb-1"},xt={class:"col-md-3"},Rt={class:"mb-1"},It={class:"col-md-3"},Ct={class:"mb-1"},Tt={class:"col-md-3"},kt={class:"mb-1"},Mt={class:"row"},Pt={class:"col-12"},Vt={class:"row"},ht=["onClick"],St={key:0,class:"alert alert-danger mt-4"},Nt={class:"mb-0"},Ut=L({__name:"DailyReportOverview",setup(Ot){const I=j(),o=g({projectId:"",reportDate:new Date().toISOString().split("T")[0],status:"DRAFT",basicInfo:{projectName:"",contractPeriod:0,cumulativePeriod:0,todayPeriod:0,todayLaborCount:0,todayEquipmentCount:0,todayMaterialInbound:0},weather:{morning:"",afternoon:""},materials:[],laborRecords:[],equipmentRecords:[],incomingRecords:[],materialInspections:[],safetyRecords:[],constructionRecords:[],importantNotes:[],tomorrowPlans:[],preparer:{reportingDepartment:"",supervisingDepartment:"",reviewer:"",associateManager:"",manager:"",siteManager:"",generalManager:""}}),d=g(!1),w=g([]),C=i(()=>o.value.reportDate),E=i(()=>H),T=i(()=>({DRAFT:"bg-secondary",SUBMITTED:"bg-primary",REVIEWED:"bg-warning",APPROVED:"bg-success",REJECTED:"bg-danger"})[o.value.status]||"bg-secondary"),k=i(()=>({DRAFT:"草稿",SUBMITTED:"已送出",REVIEWED:"審核中",APPROVED:"已核准",REJECTED:"已退回"})[o.value.status]||"草稿"),M=i(()=>({DRAFT:"您可以編輯和儲存草稿",SUBMITTED:"等待審核人員審核",REVIEWED:"正在進行審核流程",APPROVED:"日報表已核准完成",REJECTED:"日報表被退回，請修正後重新送出"})[o.value.status]||"您可以編輯和儲存草稿"),P=i(()=>o.value.basicInfo.projectName&&o.value.weather.morning&&o.value.weather.afternoon),V=i(()=>o.value.materials.length),h=i(()=>o.value.laborRecords.length),S=i(()=>o.value.equipmentRecords.length),N=i(()=>o.value.constructionRecords.length),U=[{id:"materials",name:"材料進場",icon:"fa fa-truck"},{id:"labor",name:"出工紀錄",icon:"fa fa-users"},{id:"equipment",name:"機具出工",icon:"fa fa-cogs"},{id:"incoming",name:"進場紀錄",icon:"fa fa-truck"},{id:"inspection",name:"材料檢驗",icon:"fa fa-search"},{id:"safety",name:"安全衛生",icon:"fa fa-shield-alt"},{id:"construction",name:"施工記錄",icon:"fa fa-hammer"},{id:"notes",name:"重要記事",icon:"fa fa-sticky-note"},{id:"tomorrow",name:"明日進度",icon:"fa fa-calendar"},{id:"preparer",name:"製表人",icon:"fa fa-user"}],O=r=>new Date(r).toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric",weekday:"long"}),q=async()=>{d.value=!0,d.value=!1},A=async()=>{d.value=!0,d.value=!1},B=async()=>{d.value=!0,d.value=!1},F=r=>{const e={materials:"/daily-report/materials",labor:"/daily-report/labor",equipment:"/daily-report/equipment",incoming:"/daily-report/incoming",inspection:"/daily-report/inspection",safety:"/daily-report/safety",construction:"/daily-report/construction",notes:"/daily-report/notes",tomorrow:"/daily-report/tomorrow",preparer:"/daily-report/preparer"}[r];e&&I.push(e)};return W(()=>{}),(r,s)=>(c(),u("div",Q,[t("div",Y,[t("div",null,[s[7]||(s[7]=t("h4",{class:"mb-1"},"工程日報表",-1)),t("p",$,n(O(C.value)),1)]),t("div",G,[t("button",{class:"btn btn-outline-primary",onClick:q,disabled:d.value},s[8]||(s[8]=[t("i",{class:"fa fa-copy me-1"},null,-1),m("從昨天帶入 ")]),8,K),t("button",{class:"btn btn-primary",onClick:A,disabled:d.value},s[9]||(s[9]=[t("i",{class:"fa fa-save me-1"},null,-1),m("儲存草稿 ")]),8,X),t("button",{class:"btn btn-success",onClick:B,disabled:d.value||!P.value},s[10]||(s[10]=[t("i",{class:"fa fa-paper-plane me-1"},null,-1),m("送出審核 ")]),8,Z)])]),t("div",tt,[t("div",st,[t("span",{class:x(["badge me-2",T.value])},n(k.value),3),t("span",et,n(M.value),1)])]),t("div",ot,[t("div",at,[a(v,null,{default:l(()=>[a(D,null,{default:l(()=>s[11]||(s[11]=[t("h6",{class:"mb-0"},[t("i",{class:"fa fa-info-circle me-2"}),m("工程基本資訊 ")],-1)])),_:1,__:[11]}),a(p,null,{default:l(()=>[t("div",lt,[t("div",nt,[s[12]||(s[12]=t("label",{class:"form-label"},"工程名稱",-1)),f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=e=>o.value.basicInfo.projectName=e),placeholder:"請輸入工程名稱"},null,512),[[b,o.value.basicInfo.projectName]])]),t("div",rt,[s[14]||(s[14]=t("label",{class:"form-label"},"契約工期",-1)),t("div",it,[f(t("input",{type:"number",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=e=>o.value.basicInfo.contractPeriod=e),min:"0"},null,512),[[b,o.value.basicInfo.contractPeriod]]),s[13]||(s[13]=t("span",{class:"input-group-text"},"天",-1))])]),t("div",dt,[s[16]||(s[16]=t("label",{class:"form-label"},"累計工期",-1)),t("div",ut,[f(t("input",{type:"number",class:"form-control","onUpdate:modelValue":s[2]||(s[2]=e=>o.value.basicInfo.cumulativePeriod=e),min:"0"},null,512),[[b,o.value.basicInfo.cumulativePeriod]]),s[15]||(s[15]=t("span",{class:"input-group-text"},"天",-1))])]),t("div",ct,[s[18]||(s[18]=t("label",{class:"form-label"},"本日工期",-1)),t("div",mt,[f(t("input",{type:"number",class:"form-control","onUpdate:modelValue":s[3]||(s[3]=e=>o.value.basicInfo.todayPeriod=e),min:"0"},null,512),[[b,o.value.basicInfo.todayPeriod]]),s[17]||(s[17]=t("span",{class:"input-group-text"},"天",-1))])]),t("div",pt,[s[20]||(s[20]=t("label",{class:"form-label"},"本日出工數",-1)),t("div",ft,[f(t("input",{type:"number",class:"form-control","onUpdate:modelValue":s[4]||(s[4]=e=>o.value.basicInfo.todayLaborCount=e),min:"0"},null,512),[[b,o.value.basicInfo.todayLaborCount]]),s[19]||(s[19]=t("span",{class:"input-group-text"},"人",-1))])])])]),_:1})]),_:1})]),t("div",vt,[a(v,null,{default:l(()=>[a(D,null,{default:l(()=>s[21]||(s[21]=[t("h6",{class:"mb-0"},[t("i",{class:"fa fa-cloud me-2"}),m("天氣資訊 ")],-1)])),_:1,__:[21]}),a(p,null,{default:l(()=>[t("div",bt,[s[23]||(s[23]=t("label",{class:"form-label"},"上午天氣",-1)),f(t("select",{class:"form-select","onUpdate:modelValue":s[5]||(s[5]=e=>o.value.weather.morning=e)},[s[22]||(s[22]=t("option",{value:""},"請選擇天氣",-1)),(c(!0),u(_,null,y(E.value,e=>(c(),u("option",{key:e,value:e},n(e),9,_t))),128))],512),[[R,o.value.weather.morning]])]),t("div",yt,[s[25]||(s[25]=t("label",{class:"form-label"},"下午天氣",-1)),f(t("select",{class:"form-select","onUpdate:modelValue":s[6]||(s[6]=e=>o.value.weather.afternoon=e)},[s[24]||(s[24]=t("option",{value:""},"請選擇天氣",-1)),(c(!0),u(_,null,y(E.value,e=>(c(),u("option",{key:e,value:e},n(e),9,gt))),128))],512),[[R,o.value.weather.afternoon]])])]),_:1})]),_:1})])]),t("div",Dt,[t("div",wt,[a(v,{class:"bg-primary text-white"},{default:l(()=>[a(p,{class:"text-center"},{default:l(()=>[t("h3",Et,n(V.value),1),s[26]||(s[26]=t("p",{class:"mb-0"},"材料種類",-1))]),_:1,__:[26]})]),_:1})]),t("div",xt,[a(v,{class:"bg-success text-white"},{default:l(()=>[a(p,{class:"text-center"},{default:l(()=>[t("h3",Rt,n(h.value),1),s[27]||(s[27]=t("p",{class:"mb-0"},"出工人數",-1))]),_:1,__:[27]})]),_:1})]),t("div",It,[a(v,{class:"bg-warning text-white"},{default:l(()=>[a(p,{class:"text-center"},{default:l(()=>[t("h3",Ct,n(S.value),1),s[28]||(s[28]=t("p",{class:"mb-0"},"機具數量",-1))]),_:1,__:[28]})]),_:1})]),t("div",Tt,[a(v,{class:"bg-info text-white"},{default:l(()=>[a(p,{class:"text-center"},{default:l(()=>[t("h3",kt,n(N.value),1),s[29]||(s[29]=t("p",{class:"mb-0"},"施工項目",-1))]),_:1,__:[29]})]),_:1})])]),t("div",Mt,[t("div",Pt,[a(v,null,{default:l(()=>[a(D,null,{default:l(()=>s[30]||(s[30]=[t("h6",{class:"mb-0"},[t("i",{class:"fa fa-list me-2"}),m("快速導航 ")],-1)])),_:1,__:[30]}),a(p,null,{default:l(()=>[t("div",Vt,[(c(),u(_,null,y(U,e=>t("div",{class:"col-md-2 mb-3",key:e.id},[t("button",{class:"btn btn-outline-theme w-100",onClick:qt=>F(e.id)},[t("i",{class:x(e.icon+" me-2")},null,2),m(" "+n(e.name),1)],8,ht)])),64))])]),_:1})]),_:1})])]),w.value.length>0?(c(),u("div",St,[s[31]||(s[31]=t("h6",null,"請修正以下錯誤：",-1)),t("ul",Nt,[(c(!0),u(_,null,y(w.value,e=>(c(),u("li",{key:e},n(e),1))),128))])])):J("",!0)]))}}),Ft=z(Ut,[["__scopeId","data-v-803c9aaf"]]);export{Ft as default};
