import{U as f,d as me,g as pe,j as ve,r as p,k as $,a as fe,e as o,f as i,i as b,l as t,C as U,p as y,x as R,v as n,I as u,m as g,J as I,F as T,y as _,L as z,Q as A,s as m,z as M,A as te,V as be,_ as ye}from"./index-CB9Z8Gmd.js";const S=[{value:"QUALITY_CONTROL",label:"品管人員",color:"primary",icon:"fa-check-circle"},{value:"SAFETY_OFFICER",label:"勞安人員",color:"warning",icon:"fa-shield-alt"},{value:"PROFESSIONAL_ENGINEER",label:"專業技師",color:"success",icon:"fa-user-graduate"}],j=[{value:"ACTIVE",label:"在職",color:"success",icon:"fa-check"},{value:"ON_LEAVE",label:"休假",color:"info",icon:"fa-calendar-times"},{value:"TERMINATED",label:"離職",color:"danger",icon:"fa-times"}],Z={async getList(d,r=1,v=20){return await f.get(`/management/company/${d}/site-personnel`,{params:{page:r,pageSize:v}})},async getDetail(d){return await f.get(`/management/site-personnel/${d}`)},async create(d){return await f.post("/management/site-personnel/create",d)},async update(d){return await f.patch("/management/site-personnel/update",d)},async delete(d){await f.delete(`/management/site-personnel/delete/${d}`)},async assignProject(d){return await f.post("/management/site-personnel/assign-project",d)},async removeProjectAssignment(d){return await f.post("/management/site-personnel/remove-project",{personnelId:d})},async search(d,r){return await f.get(`/management/company/${d}/site-personnel/search`,{params:{query:r}})},async getByProject(d){return await f.get(`/management/project/${d}/site-personnel`)},async createWithPhoto(d,r){const v=new FormData;return v.append("memberData",JSON.stringify(d)),v.append("photoFile",r),await f.post("/management/constructionMember/createWithPhoto",v,{headers:{"Content-Type":"multipart/form-data"}})}},Ie={class:"site-personnel-management"},xe={class:"row mb-3"},ge={class:"col-12"},Ne={class:"d-flex align-items-center justify-content-between"},Ee={class:"d-flex align-items-center gap-4"},De={class:"badge border border-primary text-primary"},Te={class:"badge border border-success text-success"},_e={class:"badge border border-info text-info"},Ae={class:"badge border border-warning text-warning"},he={class:"badge border border-success text-success"},we={class:"badge border border-info text-info"},Ce={class:"badge border border-danger text-danger"},Fe={class:"text-muted"},Se={class:"row g-3"},Pe={class:"col-md-3"},je={class:"input-group"},Oe={class:"col-md-2"},ke=["value"],Ve={class:"col-md-2"},Le=["value"],$e={class:"col-md-3"},Ue=["value"],Re={class:"col-md-2"},ze={class:"row"},Me={key:0,class:"col-12"},Ze={key:1,class:"col-12"},Qe={class:"text-muted mb-3"},Ye={key:2,class:"col-12"},qe={class:"table-responsive"},Be={class:"table table-hover mb-0 align-middle"},Ge={class:"px-4"},We={class:"fw-bold"},He={class:"text-muted"},Je={class:"px-4"},Ke={class:"px-4"},Xe={class:"small"},et={class:"px-4"},tt={class:"px-4"},st={class:"px-4"},lt={class:"small"},at={key:0,class:"mb-1"},nt={key:1,class:"text-muted mb-1"},ot={key:2,class:"mb-1"},it=["onClick"],rt={key:3,class:"text-muted"},dt={class:"px-4"},ut={class:"small"},ct={key:0,class:"text-muted"},mt={class:"px-4"},pt=["onClick"],vt=["onClick"],ft={class:"row g-3"},bt={class:"col-md-6"},yt={class:"col-md-6"},It={class:"col-md-6"},xt={class:"col-md-6"},gt={class:"col-md-6"},Nt=["value"],Et={class:"col-md-6"},Dt=["value"],Tt={class:"col-md-6"},_t={class:"col-md-6"},At={class:"col-md-6"},ht={class:"col-md-6"},wt={key:0,class:"mt-2"},Ct={class:"text-success"},Ft={class:"col-md-6"},St=["value"],Pt={class:"col-md-6"},jt={class:"col-12"},Ot=me({__name:"SitePersonnelManagement",props:{companyId:{},companyName:{}},setup(d){const r=d,v=pe(),c=v==null?void 0:v.proxy,se=ve(),N=p([]),Q=p(!1),Y=p(!1),E=p(null),x=p(""),h=p(""),w=p(""),C=p(""),D=p(null),F=p("M"),a=p({name:"",email:"",phone:"",idNumber:"",position:"QUALITY_CONTROL",specialization:"",licenseNumber:"",licenseExpiryDate:"",licenseFile:"",companyId:r.companyId,projectId:"",hireDate:new Date().toISOString().split("T")[0],notes:"",status:"ACTIVE"}),q=$(()=>{let l=N.value;if(x.value){const e=x.value.toLowerCase();l=l.filter(s=>s.name.toLowerCase().includes(e)||s.email.toLowerCase().includes(e)||s.phone.includes(e)||s.idNumber.includes(e))}return h.value&&(l=l.filter(e=>e.position===h.value)),w.value&&(l=l.filter(e=>e.status===w.value)),C.value&&(l=l.filter(e=>e.projectId===C.value)),l}),le=[{id:"proj-001",name:"台北市信義區辦公大樓新建工程",status:"ACTIVE"},{id:"proj-002",name:"新北市板橋區住宅建案",status:"ACTIVE"},{id:"proj-003",name:"桃園市龜山區工業園區工程",status:"ACTIVE"}],O=$(()=>le),B=$(()=>{const l={};return S.forEach(e=>{l[e.value]=N.value.filter(s=>s.position===e.value&&s.status==="ACTIVE").length}),l}),G=$(()=>{const l={};return j.forEach(e=>{l[e.value]=N.value.filter(s=>s.status===e.value).length}),l}),k=l=>S.find(e=>e.value===l)||S[S.length-1],V=l=>j.find(e=>e.value===l)||j[0],ae=l=>{if(!l)return"未分配";const e=O.value.find(s=>s.id===l);return e?e.name:"未知項目"},ne=[{id:"1",personnelId:"SP001",name:"張志明",email:"zhang.zhiming@example.com",phone:"0912-345-678",idNumber:"A123456789",position:"QUALITY_CONTROL",specialization:"",licenseNumber:"QC-2024-001",licenseExpiryDate:"2025-06-15",licenseFile:"/uploads/licenses/qc-001.pdf",companyId:r.companyId,projectId:"proj-001",projectName:"台北市信義區辦公大樓新建工程",status:"ACTIVE",hireDate:"2024-01-15",leaveDate:"",notes:"資深品管人員，有10年經驗",createdAt:"2024-01-15T08:00:00Z",updatedAt:"2024-01-15T08:00:00Z"},{id:"2",personnelId:"SP002",name:"李美玲",email:"li.meiling@example.com",phone:"0923-456-789",idNumber:"B987654321",position:"SAFETY_OFFICER",specialization:"",licenseNumber:"SO-2024-002",licenseExpiryDate:"2025-03-20",licenseFile:"/uploads/licenses/so-002.pdf",companyId:r.companyId,projectId:"proj-002",projectName:"新北市板橋區住宅建案",status:"ACTIVE",hireDate:"2024-02-01",leaveDate:"",notes:"勞安專員，具備多項安全證照",createdAt:"2024-02-01T09:00:00Z",updatedAt:"2024-02-01T09:00:00Z"},{id:"3",personnelId:"SP003",name:"王建國",email:"wang.jianguo@example.com",phone:"0934-567-890",idNumber:"C456789123",position:"PROFESSIONAL_ENGINEER",specialization:"",licenseNumber:"PE-2024-003",licenseExpiryDate:"2025-12-31",licenseFile:"/uploads/licenses/pe-003.pdf",companyId:r.companyId,projectId:"proj-001",projectName:"台北市信義區辦公大樓新建工程",status:"ACTIVE",hireDate:"2024-01-20",leaveDate:"",notes:"結構技師，專精於高層建築設計",createdAt:"2024-01-20T10:00:00Z",updatedAt:"2024-01-20T10:00:00Z"},{id:"4",personnelId:"SP004",name:"陳雅婷",email:"chen.yating@example.com",phone:"0945-678-901",idNumber:"D789123456",position:"QUALITY_CONTROL",specialization:"",licenseNumber:"QC-2024-004",licenseExpiryDate:"2024-11-30",licenseFile:"",companyId:r.companyId,projectId:"proj-003",projectName:"桃園市龜山區工業園區工程",status:"ON_LEAVE",hireDate:"2024-03-01",leaveDate:"",notes:"品管人員，目前請假中",createdAt:"2024-03-01T11:00:00Z",updatedAt:"2024-03-01T11:00:00Z"},{id:"5",personnelId:"SP005",name:"劉志豪",email:"liu.zhihao@example.com",phone:"0956-789-012",idNumber:"E321654987",position:"PROFESSIONAL_ENGINEER",specialization:"",licenseNumber:"PE-2024-005",licenseExpiryDate:"2025-08-15",licenseFile:"/uploads/licenses/pe-005.pdf",companyId:r.companyId,projectId:"proj-002",projectName:"新北市板橋區住宅建案",status:"ACTIVE",hireDate:"2024-02-15",leaveDate:"",notes:"機電技師，專精於智慧建築系統",createdAt:"2024-02-15T12:00:00Z",updatedAt:"2024-02-15T12:00:00Z"},{id:"6",personnelId:"SP006",name:"黃淑芬",email:"huang.shufen@example.com",phone:"0967-890-123",idNumber:"F654321987",position:"SAFETY_OFFICER",specialization:"",licenseNumber:"",licenseExpiryDate:"",licenseFile:"",companyId:r.companyId,projectId:"",projectName:"",status:"TERMINATED",hireDate:"2024-01-10",leaveDate:"2024-04-15",notes:"已離職",createdAt:"2024-01-10T13:00:00Z",updatedAt:"2024-04-15T13:00:00Z"},{id:"7",personnelId:"SP007",name:"林俊傑",email:"lin.junjie@example.com",phone:"0978-901-234",idNumber:"G987654321",position:"PROFESSIONAL_ENGINEER",specialization:"",licenseNumber:"PE-2024-007",licenseExpiryDate:"2025-05-20",licenseFile:"/uploads/licenses/pe-007.pdf",companyId:r.companyId,projectId:"proj-003",projectName:"桃園市龜山區工業園區工程",status:"ACTIVE",hireDate:"2024-03-15",leaveDate:"",notes:"土木技師，專精於基礎工程",createdAt:"2024-03-15T14:00:00Z",updatedAt:"2024-03-15T14:00:00Z"},{id:"8",personnelId:"SP008",name:"吳佳玲",email:"wu.jialing@example.com",phone:"0989-012-345",idNumber:"H123789456",position:"QUALITY_CONTROL",specialization:"",licenseNumber:"QC-2024-008",licenseExpiryDate:"2025-09-10",licenseFile:"/uploads/licenses/qc-008.pdf",companyId:r.companyId,projectId:"proj-001",projectName:"台北市信義區辦公大樓新建工程",status:"ON_LEAVE",hireDate:"2024-02-20",leaveDate:"",notes:"品管人員，目前休假中",createdAt:"2024-02-20T15:00:00Z",updatedAt:"2024-02-20T15:00:00Z"}],W=async()=>{Q.value=!0;try{N.value=ne}catch(l){console.error("載入工地人員失敗:",l),c.$toast.error("載入工地人員失敗！"),N.value=[]}finally{Q.value=!1}},H=l=>{l?(E.value=l,a.value={name:l.name,email:l.email,phone:l.phone,idNumber:l.idNumber,position:l.position,specialization:l.specialization||"",licenseNumber:l.licenseNumber||"",licenseExpiryDate:l.licenseExpiryDate||"",licenseFile:l.licenseFile||"",companyId:l.companyId,projectId:l.projectId||"",hireDate:l.hireDate,notes:l.notes||"",status:l.status}):(E.value=null,a.value={name:"",email:"",phone:"",idNumber:"",position:"QUALITY_CONTROL",specialization:"",licenseNumber:"",licenseExpiryDate:"",licenseFile:"",companyId:r.companyId,projectId:"",hireDate:new Date().toISOString().split("T")[0],notes:"",status:"ACTIVE"}),F.value="M",Y.value=!0},J=()=>{Y.value=!1,E.value=null,D.value=null,F.value="M"},K=async()=>{try{if(E.value)await Z.update({personnelId:E.value.personnelId,...a.value}),c.$toast.success("工地人員更新成功！");else if(D.value){const l={memberId:`M${Date.now()}`,fullName:a.value.name,companyId:a.value.companyId,workStartDate:a.value.hireDate+"T09:00:00",occupation:a.value.position,licenseNumber:a.value.licenseNumber||"",sex:F.value,email:a.value.email,phone:a.value.phone,licenseExpiryDate:a.value.licenseExpiryDate?a.value.licenseExpiryDate+"T17:00:00":"",comments:a.value.notes||"",constructionId:a.value.projectId||"",identityNumber:a.value.idNumber};await Z.createWithPhoto(l,D.value),c.$toast.success("工地人員建立成功！（含證照檔案）")}else await Z.create(a.value),c.$toast.success("工地人員建立成功！");J(),await W()}catch(l){console.error("操作失敗:",l),c.$toast.error("操作失敗，請重試！")}},oe=async l=>{if(window.confirm(`確定要刪除工地人員「${l.name}」嗎？此操作無法撤銷。`))try{await Z.delete(l.personnelId),c.$toast.success("工地人員刪除成功！"),await W()}catch(s){console.error("刪除失敗:",s),c.$toast.error("刪除失敗，請重試！")}},ie=l=>{window.open(l,"_blank")},re=l=>{const e=l.target;if(e.files&&e.files[0]){const s=e.files[0];D.value=s}},de=()=>{var X,L,ee;const l=new Date,e=l.getFullYear(),s=(l.getMonth()+1).toString().padStart(2,"0"),P=l.getDate().toString().padStart(2,"0");a.value={name:"王大明",email:"wang.daming@example.com",phone:"0912-345-678",idNumber:"A123456789",position:"QUALITY_CONTROL",specialization:"",licenseNumber:"QC-TEST-001",licenseExpiryDate:`${e+2}-${s}-${P}`,licenseFile:"test-license.pdf",companyId:r.companyId,projectId:((X=O.value[0])==null?void 0:X.id)||"",hireDate:`${e}-${s}-${P}`,notes:"測試資料，自動帶入",status:"ACTIVE"},F.value="M";const ue=new Blob([`%PDF-1.4
% 測試用 PDF 檔案`],{type:"application/pdf"}),ce=new File([ue],"test-license.pdf",{type:"application/pdf"});D.value=ce;try{(ee=(L=c==null?void 0:c.$toast)==null?void 0:L.info)==null||ee.call(L,"已載入測試資料（含測試用 PDF）")}catch{}};return fe(()=>{W(),se.initWorkspaces()}),(l,e)=>(i(),o("div",Ie,[b(U,{class:"mb-4"},{default:y(()=>[b(R,null,{default:y(()=>[t("div",xe,[t("div",ge,[t("div",Ne,[t("div",Ee,[e[19]||(e[19]=t("span",{class:"text-muted"},"總計：",-1)),t("span",De,n(N.value.length)+" 人",1),t("span",Te,n(B.value.QUALITY_CONTROL)+" 品管",1),t("span",_e,n(B.value.SAFETY_OFFICER)+" 勞安",1),t("span",Ae,n(B.value.PROFESSIONAL_ENGINEER)+" 技師",1),e[20]||(e[20]=t("span",{class:"text-muted ms-3"},"狀態：",-1)),t("span",he,n(G.value.ACTIVE)+" 在職",1),t("span",we,n(G.value.ON_LEAVE)+" 休假",1),t("span",Ce,n(G.value.TERMINATED)+" 離職",1)]),t("small",Fe,"顯示 "+n(q.value.length)+" / "+n(N.value.length)+" 人",1)])])]),t("div",Se,[t("div",Pe,[t("div",je,[e[22]||(e[22]=t("span",{class:"input-group-text"},[t("i",{class:"fa fa-search"})],-1)),u(t("input",{type:"text",class:"form-control",placeholder:"搜索姓名、信箱、電話、身分證...","onUpdate:modelValue":e[0]||(e[0]=s=>x.value=s)},null,512),[[I,x.value]]),x.value?(i(),o("button",{key:0,class:"btn btn-outline-secondary",type:"button",onClick:e[1]||(e[1]=s=>x.value="")},e[21]||(e[21]=[t("i",{class:"fa fa-times"},null,-1)]))):g("",!0)])]),t("div",Oe,[u(t("select",{class:"form-select","onUpdate:modelValue":e[2]||(e[2]=s=>h.value=s)},[e[23]||(e[23]=t("option",{value:""},"所有職位",-1)),(i(!0),o(T,null,_(z(S),s=>(i(),o("option",{key:s.value,value:s.value},n(s.label),9,ke))),128))],512),[[A,h.value]])]),t("div",Ve,[u(t("select",{class:"form-select","onUpdate:modelValue":e[3]||(e[3]=s=>w.value=s)},[e[24]||(e[24]=t("option",{value:""},"所有狀態",-1)),(i(!0),o(T,null,_(z(j),s=>(i(),o("option",{key:s.value,value:s.value},n(s.label),9,Le))),128))],512),[[A,w.value]])]),t("div",$e,[u(t("select",{class:"form-select","onUpdate:modelValue":e[4]||(e[4]=s=>C.value=s)},[e[25]||(e[25]=t("option",{value:""},"所有項目",-1)),e[26]||(e[26]=t("option",{value:"unassigned"},"未分配",-1)),(i(!0),o(T,null,_(O.value,s=>(i(),o("option",{key:s.id,value:s.id},n(s.name),9,Ue))),128))],512),[[A,C.value]])]),t("div",Re,[t("button",{class:"btn btn-theme w-100",onClick:e[5]||(e[5]=s=>H())},e[27]||(e[27]=[t("i",{class:"fa fa-plus me-2"},null,-1),m(" 新增工地人員 ")]))])])]),_:1})]),_:1}),t("div",ze,[Q.value?(i(),o("div",Me,[b(U,null,{default:y(()=>[b(R,{class:"text-center py-4"},{default:y(()=>e[28]||(e[28]=[t("i",{class:"fa fa-spinner fa-spin fa-2x text-muted mb-3"},null,-1),t("p",{class:"text-muted mb-0"},"載入中...",-1)])),_:1,__:[28]})]),_:1})])):q.value.length===0?(i(),o("div",Ze,[b(U,null,{default:y(()=>[b(R,{class:"text-center py-4"},{default:y(()=>[e[30]||(e[30]=t("i",{class:"fa fa-users fa-3x text-muted mb-3"},null,-1)),e[31]||(e[31]=t("h5",{class:"text-muted"},"暫無工地人員",-1)),t("p",Qe,n(x.value||h.value||w.value||C.value?"沒有符合條件的工地人員":"還沒有新增任何工地人員"),1),!x.value&&!h.value&&!w.value&&!C.value?(i(),o("button",{key:0,class:"btn btn-theme",onClick:e[6]||(e[6]=s=>H())},e[29]||(e[29]=[t("i",{class:"fa fa-plus me-2"},null,-1),m(" 新增第一個工地人員 ")]))):g("",!0)]),_:1,__:[30,31]})]),_:1})])):(i(),o("div",Ye,[b(U,null,{default:y(()=>[b(R,{class:"p-0"},{default:y(()=>[t("div",qe,[t("table",Be,[e[40]||(e[40]=t("thead",null,[t("tr",null,[t("th",null,"姓名"),t("th",null,"職位"),t("th",null,"聯絡資訊"),t("th",null,"分配項目"),t("th",null,"狀態"),t("th",null,"證照"),t("th",null,"僱用日期"),t("th",{width:"120"},"操作")])],-1)),t("tbody",null,[(i(!0),o(T,null,_(q.value,s=>(i(),o("tr",{key:s.id},[t("td",Ge,[t("div",null,[t("div",We,n(s.name),1),t("small",He,n(s.idNumber),1)])]),t("td",Je,[t("span",{class:M(["badge border px-2 pt-5px pb-5px rounded fs-12px d-inline-flex align-items-center",`border-${k(s.position).color} text-${k(s.position).color}`])},[t("i",{class:M(`fa ${k(s.position).icon} me-1`)},null,2),m(" "+n(k(s.position).label),1)],2)]),t("td",Ke,[t("div",Xe,[t("div",null,[e[32]||(e[32]=t("i",{class:"fa fa-envelope me-1"},null,-1)),m(n(s.email),1)]),t("div",null,[e[33]||(e[33]=t("i",{class:"fa fa-phone me-1"},null,-1)),m(n(s.phone),1)])])]),t("td",et,[t("span",null,n(ae(s.projectId)),1)]),t("td",tt,[t("span",{class:M(["badge border px-2 pt-5px pb-5px rounded fs-12px d-inline-flex align-items-center",`border-${V(s.status).color} text-${V(s.status).color}`])},[t("i",{class:M(`fa ${V(s.status).icon} me-1`)},null,2),m(" "+n(V(s.status).label),1)],2)]),t("td",st,[t("div",lt,[s.licenseNumber?(i(),o("div",at,[e[34]||(e[34]=t("i",{class:"fa fa-id-card me-1"},null,-1)),m(n(s.licenseNumber),1)])):g("",!0),s.licenseExpiryDate?(i(),o("div",nt,[e[35]||(e[35]=t("i",{class:"fa fa-calendar me-1"},null,-1)),m(n(s.licenseExpiryDate),1)])):g("",!0),s.licenseFile?(i(),o("div",ot,[t("a",{href:"#",class:"text-decoration-none",onClick:te(P=>ie(s.licenseFile),["prevent"])},e[36]||(e[36]=[t("i",{class:"fa fa-download me-1"},null,-1),m("下載證照 ")]),8,it)])):g("",!0),!s.licenseNumber&&!s.licenseExpiryDate&&!s.licenseFile?(i(),o("div",rt,e[37]||(e[37]=[t("i",{class:"fa fa-minus me-1"},null,-1),m("無證照 ")]))):g("",!0)])]),t("td",dt,[t("div",ut,[t("div",null,n(s.hireDate),1),s.leaveDate?(i(),o("div",ct," 離職: "+n(s.leaveDate),1)):g("",!0)])]),t("td",mt,[t("button",{class:"btn btn-sm btn-outline-primary me-1",onClick:P=>H(s),title:"編輯"},e[38]||(e[38]=[t("i",{class:"fa fa-edit"},null,-1)]),8,pt),t("button",{class:"btn btn-sm btn-outline-danger",onClick:P=>oe(s),title:"刪除"},e[39]||(e[39]=[t("i",{class:"fa fa-trash"},null,-1)]),8,vt)])]))),128))])])])]),_:1})]),_:1})]))]),b(be,{show:Y.value,title:E.value?"編輯工地人員":"新增工地人員",icon:"fa fa-user",size:"lg","modal-id":"personnelFormModal","confirm-text":E.value?"更新":"新增","confirm-icon":"fa fa-save",onHide:J,onConfirm:K},{body:y(()=>[t("form",{onSubmit:te(K,["prevent"])},[t("div",{class:"d-flex justify-content-end mb-3"},[t("button",{class:"btn btn-outline-secondary btn-sm",type:"button",onClick:de},e[41]||(e[41]=[t("i",{class:"fa fa-magic me-1"},null,-1),m(" 載入測試資料 ")]))]),t("div",ft,[t("div",bt,[e[42]||(e[42]=t("label",{class:"form-label"},"姓名 *",-1)),u(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[7]||(e[7]=s=>a.value.name=s),required:""},null,512),[[I,a.value.name]])]),t("div",yt,[e[43]||(e[43]=t("label",{class:"form-label"},"身分證號 *",-1)),u(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[8]||(e[8]=s=>a.value.idNumber=s),maxlength:"10",required:""},null,512),[[I,a.value.idNumber]])]),t("div",It,[e[44]||(e[44]=t("label",{class:"form-label"},"電子信箱 *",-1)),u(t("input",{type:"email",class:"form-control","onUpdate:modelValue":e[9]||(e[9]=s=>a.value.email=s),required:""},null,512),[[I,a.value.email]])]),t("div",xt,[e[45]||(e[45]=t("label",{class:"form-label"},"聯絡電話 *",-1)),u(t("input",{type:"tel",class:"form-control","onUpdate:modelValue":e[10]||(e[10]=s=>a.value.phone=s),required:""},null,512),[[I,a.value.phone]])]),t("div",gt,[e[46]||(e[46]=t("label",{class:"form-label"},"職位 *",-1)),u(t("select",{class:"form-select","onUpdate:modelValue":e[11]||(e[11]=s=>a.value.position=s),required:""},[(i(!0),o(T,null,_(z(S),s=>(i(),o("option",{key:s.value,value:s.value},n(s.label),9,Nt))),128))],512),[[A,a.value.position]])]),t("div",Et,[e[47]||(e[47]=t("label",{class:"form-label"},"狀態 *",-1)),u(t("select",{class:"form-select","onUpdate:modelValue":e[12]||(e[12]=s=>a.value.status=s),required:""},[(i(!0),o(T,null,_(z(j),s=>(i(),o("option",{key:s.value,value:s.value},n(s.label),9,Dt))),128))],512),[[A,a.value.status]])]),t("div",Tt,[e[49]||(e[49]=t("label",{class:"form-label"},"性別 *",-1)),u(t("select",{class:"form-select","onUpdate:modelValue":e[13]||(e[13]=s=>F.value=s),required:""},e[48]||(e[48]=[t("option",{value:"M"},"男",-1),t("option",{value:"F"},"女",-1)]),512),[[A,F.value]])]),t("div",_t,[e[50]||(e[50]=t("label",{class:"form-label"},"證照號碼",-1)),u(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[14]||(e[14]=s=>a.value.licenseNumber=s),placeholder:"請輸入證照號碼"},null,512),[[I,a.value.licenseNumber]])]),t("div",At,[e[51]||(e[51]=t("label",{class:"form-label"},"證照到期日",-1)),u(t("input",{type:"date",class:"form-control","onUpdate:modelValue":e[15]||(e[15]=s=>a.value.licenseExpiryDate=s)},null,512),[[I,a.value.licenseExpiryDate]])]),t("div",ht,[e[53]||(e[53]=t("label",{class:"form-label"},"證照檔案",-1)),t("input",{type:"file",class:"form-control",onChange:re,accept:".pdf"},null,32),e[54]||(e[54]=t("div",{class:"form-text"},"只支援 PDF 格式",-1)),D.value?(i(),o("div",wt,[t("small",Ct,[e[52]||(e[52]=t("i",{class:"fa fa-check me-1"},null,-1)),m(" 已選擇："+n(D.value.name),1)])])):g("",!0)]),t("div",Ft,[e[56]||(e[56]=t("label",{class:"form-label"},"分配項目",-1)),u(t("select",{class:"form-select","onUpdate:modelValue":e[16]||(e[16]=s=>a.value.projectId=s)},[e[55]||(e[55]=t("option",{value:""},"請選擇項目（可不選）",-1)),(i(!0),o(T,null,_(O.value,s=>(i(),o("option",{key:s.id,value:s.id},n(s.name),9,St))),128))],512),[[A,a.value.projectId]]),e[57]||(e[57]=t("div",{class:"form-text"},"一個工地人員只能分配到一個項目",-1))]),t("div",Pt,[e[58]||(e[58]=t("label",{class:"form-label"},"僱用日期 *",-1)),u(t("input",{type:"date",class:"form-control","onUpdate:modelValue":e[17]||(e[17]=s=>a.value.hireDate=s),required:""},null,512),[[I,a.value.hireDate]])]),t("div",jt,[e[59]||(e[59]=t("label",{class:"form-label"},"備註",-1)),u(t("textarea",{class:"form-control","onUpdate:modelValue":e[18]||(e[18]=s=>a.value.notes=s),rows:"3",placeholder:"其他備註資訊..."},null,512),[[I,a.value.notes]])])])],32)]),_:1},8,["show","title","confirm-text"])]))}}),Lt=ye(Ot,[["__scopeId","data-v-aac5c975"]]);export{Lt as S};
