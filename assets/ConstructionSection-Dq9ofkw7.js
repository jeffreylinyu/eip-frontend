import{d as N,u as S,r as b,I as g,o as U,f as c,g as u,h as s,n as o,k as r,p as l,J as j,K as m,i as D,F as L,D as M,j as x,t as p,v as h,L as f,_ as T}from"./index-0fEq5Ai7.js";const F={class:"construction-section"},I={class:"d-flex align-items-start gap-2"},E={class:"flex-grow-1"},H={class:"input-group"},J={class:"input-group-text"},K=["onUpdate:modelValue"],P=["onUpdate:modelValue"],$=["onClick"],q={key:0,class:"text-center text-muted py-4"},z={class:"row mt-4"},A={class:"col-md-4"},G={class:"mb-1"},O={class:"col-md-4"},Q={class:"mb-1"},W={class:"col-md-4"},X={class:"mb-1"},Y={class:"d-flex justify-content-between mt-4"},Z={class:"d-flex gap-2"},ss=["disabled"],ts=["disabled"],es=N({__name:"ConstructionSection",setup(os){const v=S(),e=b([]),i=b(!1),y=g(()=>{if(e.value.length===0)return 0;const n=e.value.reduce((t,a)=>t+(a.progress||0),0);return Math.round(n/e.value.length)}),C=g(()=>e.value.filter(n=>(n.progress||0)>=100).length),w=()=>{e.value.push({content:"",progress:0})},k=n=>{e.value.splice(n,1)},V=async()=>{i.value=!0;try{console.log("儲存施工記錄:",e.value)}catch(n){console.error("儲存失敗:",n)}finally{i.value=!1}},B=()=>{v.push("/daily-report/safety")},R=()=>{v.push("/daily-report/notes")};return U(()=>{console.log("載入施工記錄資料")}),(n,t)=>(u(),c("div",F,[s("div",{class:"d-flex justify-content-between align-items-center mb-4"},[t[1]||(t[1]=s("div",null,[s("h4",{class:"mb-1"},"每日施工記錄"),s("p",{class:"text-muted mb-0"},"記錄實際施工項目和進度")],-1)),s("div",{class:"d-flex gap-2"},[s("button",{class:"btn btn-outline-primary",onClick:w},t[0]||(t[0]=[s("i",{class:"fa fa-plus me-1"},null,-1),r("新增施工項目 ")]))])]),o(f,null,{default:l(()=>[o(j,null,{default:l(()=>t[2]||(t[2]=[s("h6",{class:"mb-0"},[s("i",{class:"fa fa-hammer me-2"}),r("每日施工記錄 ")],-1)])),_:1,__:[2]}),o(m,null,{default:l(()=>[(u(!0),c(L,null,M(e.value,(a,_)=>(u(),c("div",{key:a.id||_,class:"mb-3"},[s("div",I,[s("div",E,[s("div",H,[s("span",J,p(_+1),1),x(s("textarea",{class:"form-control","onUpdate:modelValue":d=>a.content=d,rows:"3",placeholder:"請輸入施工項目內容..."},null,8,K),[[h,a.content]]),x(s("input",{type:"number",class:"form-control",style:{"max-width":"100px"},"onUpdate:modelValue":d=>a.progress=d,min:"0",max:"100",placeholder:"進度%"},null,8,P),[[h,a.progress]]),t[3]||(t[3]=s("span",{class:"input-group-text"},"%",-1))])]),s("button",{class:"btn btn-outline-danger",onClick:d=>k(_),title:"刪除"},t[4]||(t[4]=[s("i",{class:"fa fa-trash"},null,-1)]),8,$)])]))),128)),e.value.length===0?(u(),c("div",q,t[5]||(t[5]=[s("i",{class:"fa fa-hammer fa-2x mb-2"},null,-1),s("p",{class:"mb-0"},"尚未新增任何施工記錄",-1)]))):D("",!0)]),_:1})]),_:1}),s("div",z,[s("div",A,[o(f,{class:"bg-primary text-white"},{default:l(()=>[o(m,{class:"text-center"},{default:l(()=>[s("h4",G,p(e.value.length),1),t[6]||(t[6]=s("p",{class:"mb-0"},"施工項目數",-1))]),_:1,__:[6]})]),_:1})]),s("div",O,[o(f,{class:"bg-success text-white"},{default:l(()=>[o(m,{class:"text-center"},{default:l(()=>[s("h4",Q,p(y.value)+"%",1),t[7]||(t[7]=s("p",{class:"mb-0"},"平均進度",-1))]),_:1,__:[7]})]),_:1})]),s("div",W,[o(f,{class:"bg-warning text-white"},{default:l(()=>[o(m,{class:"text-center"},{default:l(()=>[s("h4",X,p(C.value),1),t[8]||(t[8]=s("p",{class:"mb-0"},"已完成項目",-1))]),_:1,__:[8]})]),_:1})])]),s("div",Y,[s("button",{class:"btn btn-outline-secondary",onClick:B},t[9]||(t[9]=[s("i",{class:"fa fa-arrow-left me-1"},null,-1),r("返回安全衛生頁面 ")])),s("div",Z,[s("button",{class:"btn btn-primary",onClick:V,disabled:i.value},t[10]||(t[10]=[s("i",{class:"fa fa-save me-1"},null,-1),r("儲存 ")]),8,ss),s("button",{class:"btn btn-success",onClick:R,disabled:i.value},t[11]||(t[11]=[r(" 下一步 "),s("i",{class:"fa fa-arrow-right ms-1"},null,-1)]),8,ts)])])]))}}),ns=T(es,[["__scopeId","data-v-011c4850"]]);export{ns as default};
